<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friends Spot | Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.5); }
        .screen { display: none; }
        .active-screen { display: block; animation: fadeIn 0.4s ease; }
        .nav-active { color: #000; transform: scale(1.1); font-weight: 800; }
        .chat-pill { padding: 8px 16px; border-radius: 99px; font-size: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .chat-pill.active { background: black; color: white; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="login-screen" class="fixed inset-0 z-[100] flex items-center justify-center bg-[#f0f2f5] p-6">
        <div class="glass w-full max-w-sm p-10 rounded-[40px] shadow-2xl">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-extrabold italic tracking-tighter">Friends Spot</h1>
                <p id="form-title" class="text-[10px] tracking-widest text-slate-400 uppercase mt-2 font-bold">Sign In to Continue</p>
            </div>
            
            <div class="space-y-4">
                <input id="user-input" type="text" placeholder="Username" class="w-full p-4 rounded-2xl bg-white/50 border-none outline-none shadow-sm focus:ring-2 ring-blue-400">
                <input id="pass-input" type="password" placeholder="Password (Optional for Guests)" class="w-full p-4 rounded-2xl bg-white/50 border-none outline-none shadow-sm focus:ring-2 ring-blue-400">
                <button onclick="enterApp()" class="w-full bg-black text-white font-bold py-4 rounded-2xl shadow-xl hover:scale-[1.02] transition">Enter the Spot</button>
            </div>

            <div class="mt-6 text-center">
                <p id="toggle-text" class="text-xs text-slate-500">Don't have an account? <span onclick="toggleAuth()" class="text-blue-500 font-bold cursor-pointer">Sign Up</span></p>
            </div>
        </div>
    </div>

    <div id="main-app" class="hidden min-h-screen flex flex-col">
        
        <nav class="fixed top-0 w-full glass z-40 px-8 py-5 flex justify-between items-center">
            <h2 id="header-label" class="text-xl font-extrabold italic">FS.</h2>
            <div id="admin-indicator" class="hidden w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
        </nav>

        <main id="screen-home" class="screen active-screen mt-24 px-6 pb-32 max-w-lg mx-auto w-full">
            <div class="glass rounded-[35px] overflow-hidden shadow-lg mb-6 p-6">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center font-bold">H</div>
                    <span class="ml-3 font-bold">huzaifa23 <i class="fas fa-check-circle text-blue-500 text-xs"></i></span>
                </div>
                <p class="text-sm text-slate-600">This is your main blog feed. Only verified friends can post here.</p>
            </div>
        </main>

        <main id="screen-chat" class="screen mt-24 px-6 pb-32 max-w-lg mx-auto w-full flex flex-col h-[75vh]">
            <div class="flex space-x-2 mb-4">
                <div onclick="switchChat('global')" id="tab-global" class="chat-pill active">Global Chat</div>
                <div onclick="switchChat('personal')" id="tab-personal" class="chat-pill bg-white text-slate-400">Personal</div>
            </div>

            <div id="chat-box" class="flex-1 overflow-y-auto space-y-4 p-2">
                </div>

            <div class="mt-4 flex gap-2">
                <input id="msg-input" type="text" placeholder="Type instantly..." class="glass flex-1 p-4 rounded-full outline-none text-sm shadow-md">
                <button onclick="sendMsg()" class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center shadow-lg"><i class="fas fa-paper-plane"></i></button>
            </div>
        </main>

        <main id="screen-profile" class="screen mt-24 px-6 pb-32 max-w-lg mx-auto w-full text-center">
            <div class="glass p-10 rounded-[40px] shadow-xl">
                <div id="profile-img" class="w-24 h-24 rounded-full mx-auto bg-slate-100 flex items-center justify-center text-3xl font-black mb-4">?</div>
                <h3 id="p-name" class="text-2xl font-black italic">User</h3>
                <p id="p-status" class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">Standard User</p>
                <div class="flex justify-around mt-8 border-t pt-8">
                    <div><p class="font-black text-lg">0</p><p class="text-[10px] text-slate-400 uppercase">Posts</p></div>
                    <div><p class="font-black text-lg">1.2k</p><p class="text-[10px] text-slate-400 uppercase">Followers</p></div>
                </div>
                <button onclick="location.reload()" class="mt-8 text-red-500 font-bold text-xs uppercase tracking-widest">Sign Out</button>
            </div>
        </main>

        <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-[90%] max-w-xs glass rounded-full p-4 flex justify-around items-center shadow-2xl z-50">
            <i onclick="tab('home')" id="n-home" class="fas fa-th-large text-xl cursor-pointer nav-active"></i>
            <i onclick="tab('chat')" id="n-chat" class="fas fa-comment-alt text-xl cursor-pointer text-slate-300"></i>
            <i onclick="tab('profile')" id="n-profile" class="fas fa-user-circle text-xl cursor-pointer text-slate-300"></i>
        </nav>
    </div>

    <script>
        // Setup Ably Real-time (Free API key for demo)
        const ably = new Ably.Realtime('p_t8GA.C_mK_g:vN5k5N_899hE8A6I-G7E8Q'); 
        const channel = ably.channels.get('global-chat');

        let myUser = "";
        let isSignUp = false;

        function toggleAuth() {
            isSignUp = !isSignUp;
            document.getElementById('form-title').innerText = isSignUp ? "Create Account" : "Sign In to Continue";
            document.getElementById('toggle-text').innerHTML = isSignUp ? 
                `Already have an account? <span onclick="toggleAuth()" class="text-blue-500 font-bold cursor-pointer">Sign In</span>` :
                `Don't have an account? <span onclick="toggleAuth()" class="text-blue-500 font-bold cursor-pointer">Sign Up</span>`;
        }

        function enterApp() {
            myUser = document.getElementById('user-input').value;
            const pass = document.getElementById('pass-input').value;
            if(!myUser) return alert("Enter a name");

            document.getElementById('p-name').innerText = myUser;
            document.getElementById('profile-img').innerText = myUser.charAt(0).toUpperCase();

            if(myUser === 'huzaifa23' && pass === 'huzaifa23') {
                document.getElementById('admin-indicator').classList.remove('hidden');
                document.getElementById('p-status').innerHTML = "Administrator <i class='fas fa-check-circle text-blue-500'></i>";
            }

            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            
            // Subscribe to real-time messages
            channel.subscribe('msg', (message) => {
                renderMsg(message.data);
            });
        }

        function tab(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
            document.querySelectorAll('nav i').forEach(i => i.classList.replace('nav-active', 'text-slate-300'));
            document.getElementById('screen-' + id).classList.add('active-screen');
            document.getElementById('n-' + id).classList.add('nav-active');
            document.getElementById('n-' + id).classList.remove('text-slate-300');
            document.getElementById('header-label').innerText = id === 'home' ? 'FS.' : id.toUpperCase();
        }

        function switchChat(type) {
            document.getElementById('tab-global').className = type === 'global' ? 'chat-pill active' : 'chat-pill bg-white text-slate-400';
            document.getElementById('tab-personal').className = type === 'personal' ? 'chat-pill active' : 'chat-pill bg-white text-slate-400';
            document.getElementById('chat-box').innerHTML = `<p class="text-center text-[10px] text-slate-400 py-4 uppercase font-bold">Switching to ${type} chat...</p>`;
        }

        function sendMsg() {
            const val = document.getElementById('msg-input').value;
            if(!val) return;
            channel.publish('msg', { user: myUser, text: val });
            document.getElementById('msg-input').value = "";
        }

        function renderMsg(data) {
            const chat = document.getElementById('chat-box');
            const isMe = data.user === myUser;
            const msgHtml = `
                <div class="flex ${isMe ? 'justify-end' : 'justify-start'}">
                    <div class="${isMe ? 'bg-black text-white rounded-tr-none' : 'glass rounded-tl-none'} p-4 rounded-[25px] text-sm shadow-md max-w-[85%]">
                        <p class="text-[9px] font-bold opacity-50 uppercase mb-1">${data.user}</p>
                        ${data.text}
                    </div>
                </div>`;
            chat.innerHTML += msgHtml;
            chat.scrollTop = chat.scrollHeight;
        }
    </script>
</body>
</html>
